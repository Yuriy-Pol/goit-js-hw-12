{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const apiKey = '41611700-7d67ead1fe1a36cc390063edf';\n  const searchForm = document.getElementById('searchForm');\n  const searchQueryInput = document.getElementById('searchQuery');\n  const loader = document.getElementById('loader');\n  const galleryContainer = document.getElementById('gallery');\n  const loadMoreButton = document.getElementById('loadMore');\n  let lightbox;\n  let currentPage = 1;\n  let currentSearchQuery = '';\n  let totalHits = 0;\n\n  searchForm.addEventListener('submit', async function (event) {\n    event.preventDefault();\n    const searchQuery = searchQueryInput.value.trim();\n\n    if (searchQuery === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query',\n      });\n      return;\n    }\n\n    loadMoreButton.style.display = 'none';\n\n    loader.style.display = 'block';\n\n    try {\n      const response = await axios.get(\n        `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=40`\n      );\n\n      const data = response.data;\n      loader.style.display = 'none';\n\n      if (data.hits.length === 0) {\n        iziToast.info({\n          title: 'Info',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        totalHits = data.totalHits;\n\n        if (searchQuery !== currentSearchQuery) {\n          currentPage = 1;\n          currentSearchQuery = searchQuery;\n          galleryContainer.innerHTML = '';\n        }\n\n        data.hits.forEach(image => {\n          const img = document.createElement('img');\n          img.src = image.webformatURL;\n          img.alt = image.tags;\n          img.dataset.large = image.largeImageURL;\n          img.dataset.title = `Likes: ${image.likes}, Views: ${image.views}, Comments: ${image.comments}, Downloads: ${image.downloads}`;\n          img.classList.add('image-class');\n          const a = document.createElement('a');\n          a.href = image.largeImageURL;\n          a.appendChild(img);\n\n          galleryContainer.appendChild(a);\n        });\n\n        lightbox.refresh();\n\n        if (totalHits <= currentPage * 40) {\n          iziToast.info({\n            title: 'Info',\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n          });\n        } else {\n          loadMoreButton.style.display = 'block';\n        }\n\n        const cardHeight =\n          galleryContainer.firstElementChild.getBoundingClientRect().height;\n\n        window.scrollTo({\n          top: window.scrollY + cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n    } catch (error) {\n      loader.style.display = 'none';\n      console.error('Error fetching images:', error);\n    }\n  });\n\n  loadMoreButton.addEventListener('click', function () {\n    currentPage += 1;\n    searchForm.dispatchEvent(new Event('submit'));\n  });\n\n  lightbox = new SimpleLightbox('#gallery a');\n});\n"],"names":["apiKey","searchForm","searchQueryInput","loader","galleryContainer","loadMoreButton","lightbox","currentPage","currentSearchQuery","totalHits","event","searchQuery","iziToast","data","axios","image","img","a","cardHeight","error","SimpleLightbox"],"mappings":"owBAMA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAS,qCACTC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAmB,SAAS,eAAe,aAAa,EACxDC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAmB,SAAS,eAAe,SAAS,EACpDC,EAAiB,SAAS,eAAe,UAAU,EACzD,IAAIC,EACAC,EAAc,EACdC,EAAqB,GACrBC,EAAY,EAEhBR,EAAW,iBAAiB,SAAU,eAAgBS,EAAO,CAC3DA,EAAM,eAAc,EACpB,MAAMC,EAAcT,EAAiB,MAAM,KAAI,EAE/C,GAAIS,IAAgB,GAAI,CACtBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACjB,CAAO,EACD,MACD,CAEDP,EAAe,MAAM,QAAU,OAE/BF,EAAO,MAAM,QAAU,QAEvB,GAAI,CAKF,MAAMU,GAJW,MAAMC,EAAM,IAC3B,gCAAgCd,OAAYW,kEAA4EJ,eAChI,GAE4B,KAGtB,GAFAJ,EAAO,MAAM,QAAU,OAEnBU,EAAK,KAAK,SAAW,EACvBD,EAAS,KAAK,CACZ,MAAO,OACP,QACE,0EACZ,CAAS,MACI,CACLH,EAAYI,EAAK,UAEbF,IAAgBH,IAClBD,EAAc,EACdC,EAAqBG,EACrBP,EAAiB,UAAY,IAG/BS,EAAK,KAAK,QAAQE,GAAS,CACzB,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMD,EAAM,aAChBC,EAAI,IAAMD,EAAM,KAChBC,EAAI,QAAQ,MAAQD,EAAM,cAC1BC,EAAI,QAAQ,MAAQ,UAAUD,EAAM,iBAAiBA,EAAM,oBAAoBA,EAAM,wBAAwBA,EAAM,YACnHC,EAAI,UAAU,IAAI,aAAa,EAC/B,MAAMC,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOF,EAAM,cACfE,EAAE,YAAYD,CAAG,EAEjBZ,EAAiB,YAAYa,CAAC,CACxC,CAAS,EAEDX,EAAS,QAAO,EAEZG,GAAaF,EAAc,GAC7BK,EAAS,KAAK,CACZ,MAAO,OACP,QACE,4DACd,CAAW,EAEDP,EAAe,MAAM,QAAU,QAGjC,MAAMa,EACJd,EAAiB,kBAAkB,sBAAuB,EAAC,OAE7D,OAAO,SAAS,CACd,IAAK,OAAO,QAAUc,EAAa,EACnC,SAAU,QACpB,CAAS,CACF,CACF,OAAQC,EAAP,CACAhB,EAAO,MAAM,QAAU,OACvB,QAAQ,MAAM,yBAA0BgB,CAAK,CAC9C,CACL,CAAG,EAEDd,EAAe,iBAAiB,QAAS,UAAY,CACnDE,GAAe,EACfN,EAAW,cAAc,IAAI,MAAM,QAAQ,CAAC,CAChD,CAAG,EAEDK,EAAW,IAAIc,EAAe,YAAY,CAC5C,CAAC"}